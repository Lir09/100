import { EventLogItem, TileState } from "@/types/realtime";

// Use a stable seed so SSR and client renders stay in sync.
const baseTime = Date.UTC(2024, 10, 28, 0, 0, 0);

export const defaultSelectedTileId = "B2";

export const initialTiles: TileState[] = [
  {
    tileId: "A1",
    riskScore: 0.18,
    alarmStatus: "none",
    temperature: 24.5,
    smoke: 0.04,
    illuminance: 0.86,
    updatedAt: baseTime,
  },
  {
    tileId: "A2",
    riskScore: 0.22,
    alarmStatus: "none",
    temperature: 25.2,
    smoke: 0.05,
    illuminance: 0.81,
    updatedAt: baseTime,
  },
  {
    tileId: "A3",
    riskScore: 0.27,
    alarmStatus: "none",
    temperature: 26.8,
    smoke: 0.06,
    illuminance: 0.72,
    updatedAt: baseTime,
  },
  {
    tileId: "A4",
    riskScore: 0.31,
    alarmStatus: "warn",
    temperature: 30.1,
    smoke: 0.11,
    illuminance: 0.64,
    updatedAt: baseTime,
  },
  {
    tileId: "B1",
    riskScore: 0.12,
    alarmStatus: "none",
    temperature: 23.4,
    smoke: 0.03,
    illuminance: 0.91,
    updatedAt: baseTime,
  },
  {
    tileId: "B2",
    riskScore: 0.42,
    alarmStatus: "warn",
    temperature: 33.5,
    smoke: 0.13,
    illuminance: 0.55,
    updatedAt: baseTime,
  },
  {
    tileId: "B3",
    riskScore: 0.16,
    alarmStatus: "none",
    temperature: 24.1,
    smoke: 0.04,
    illuminance: 0.82,
    updatedAt: baseTime,
  },
  {
    tileId: "B4",
    riskScore: 0.21,
    alarmStatus: "none",
    temperature: 25.6,
    smoke: 0.05,
    illuminance: 0.74,
    updatedAt: baseTime,
  },
  {
    tileId: "C1",
    riskScore: 0.14,
    alarmStatus: "none",
    temperature: 24.0,
    smoke: 0.03,
    illuminance: 0.88,
    updatedAt: baseTime,
  },
  {
    tileId: "C2",
    riskScore: 0.19,
    alarmStatus: "none",
    temperature: 25.3,
    smoke: 0.05,
    illuminance: 0.76,
    updatedAt: baseTime,
  },
  {
    tileId: "C3",
    riskScore: 0.24,
    alarmStatus: "none",
    temperature: 27.4,
    smoke: 0.08,
    illuminance: 0.69,
    updatedAt: baseTime,
  },
  {
    tileId: "C4",
    riskScore: 0.34,
    alarmStatus: "warn",
    temperature: 31.2,
    smoke: 0.12,
    illuminance: 0.58,
    updatedAt: baseTime,
  },
  {
    tileId: "D1",
    riskScore: 0.11,
    alarmStatus: "none",
    temperature: 23.1,
    smoke: 0.02,
    illuminance: 0.93,
    updatedAt: baseTime,
  },
  {
    tileId: "D2",
    riskScore: 0.17,
    alarmStatus: "none",
    temperature: 24.9,
    smoke: 0.04,
    illuminance: 0.85,
    updatedAt: baseTime,
  },
  {
    tileId: "D3",
    riskScore: 0.28,
    alarmStatus: "none",
    temperature: 27.9,
    smoke: 0.07,
    illuminance: 0.67,
    updatedAt: baseTime,
  },
  {
    tileId: "D4",
    riskScore: 0.39,
    alarmStatus: "warn",
    temperature: 32.8,
    smoke: 0.14,
    illuminance: 0.49,
    updatedAt: baseTime,
  },
];

export const tileUpdateQueue: Array<Omit<TileState, "updatedAt">> = [
  {
    tileId: "B2",
    riskScore: 0.64,
    alarmStatus: "warn",
    temperature: 38.2,
    smoke: 0.21,
    illuminance: 0.52,
  },
  {
    tileId: "C3",
    riskScore: 0.41,
    alarmStatus: "warn",
    temperature: 35.1,
    smoke: 0.16,
    illuminance: 0.61,
  },
  {
    tileId: "D4",
    riskScore: 0.82,
    alarmStatus: "alarm",
    temperature: 44.3,
    smoke: 0.33,
    illuminance: 0.37,
  },
  {
    tileId: "A4",
    riskScore: 0.55,
    alarmStatus: "warn",
    temperature: 36.8,
    smoke: 0.19,
    illuminance: 0.46,
  },
  {
    tileId: "B3",
    riskScore: 0.31,
    alarmStatus: "none",
    temperature: 29.2,
    smoke: 0.1,
    illuminance: 0.65,
  },
  {
    tileId: "C4",
    riskScore: 0.73,
    alarmStatus: "alarm",
    temperature: 41.2,
    smoke: 0.29,
    illuminance: 0.41,
  },
  {
    tileId: "A2",
    riskScore: 0.27,
    alarmStatus: "none",
    temperature: 28.0,
    smoke: 0.09,
    illuminance: 0.7,
  },
  {
    tileId: "D1",
    riskScore: 0.22,
    alarmStatus: "none",
    temperature: 27.6,
    smoke: 0.08,
    illuminance: 0.74,
  },
  {
    tileId: "B2",
    riskScore: 0.71,
    alarmStatus: "alarm",
    temperature: 43.5,
    smoke: 0.37,
    illuminance: 0.33,
  },
  {
    tileId: "D4",
    riskScore: 0.66,
    alarmStatus: "alarm",
    temperature: 42.0,
    smoke: 0.31,
    illuminance: 0.39,
  },
  {
    tileId: "C3",
    riskScore: 0.52,
    alarmStatus: "warn",
    temperature: 37.5,
    smoke: 0.2,
    illuminance: 0.57,
  },
  {
    tileId: "A4",
    riskScore: 0.48,
    alarmStatus: "warn",
    temperature: 35.6,
    smoke: 0.18,
    illuminance: 0.44,
  },
];

const mockEventsSeed: EventLogItem[] = [
  {
    id: "evt-01",
    timestamp: baseTime + 1000 * 60 * 1,
    tileId: "B2",
    state: "warn",
    riskScore: 0.64,
    reasonText: "온도 상승이 5분 평균 대비 18% 커졌습니다.",
    contributions: {
      temperature: 0.64,
      tempSlope: 0.42,
      smoke: 0.18,
      luminanceDelta: 0.1,
    },
  },
  {
    id: "evt-02",
    timestamp: baseTime + 1000 * 60 * 2,
    tileId: "D4",
    state: "warn",
    riskScore: 0.58,
    reasonText: "연기 농도 증가가 감지되었습니다.",
    contributions: {
      temperature: 0.33,
      tempSlope: 0.21,
      smoke: 0.62,
      luminanceDelta: 0.09,
    },
  },
  {
    id: "evt-03",
    timestamp: baseTime + 1000 * 60 * 3,
    tileId: "C4",
    state: "alarm",
    riskScore: 0.81,
    reasonText: "연기 + 조도 하락으로 화재 가능성이 높습니다.",
    contributions: {
      temperature: 0.44,
      tempSlope: 0.38,
      smoke: 0.77,
      luminanceDelta: 0.41,
    },
  },
  {
    id: "evt-04",
    timestamp: baseTime + 1000 * 60 * 4,
    tileId: "B2",
    state: "alarm",
    riskScore: 0.72,
    reasonText: "온도/연기 추세가 지속적으로 증가 중입니다.",
    contributions: {
      temperature: 0.57,
      tempSlope: 0.48,
      smoke: 0.52,
      luminanceDelta: 0.22,
    },
  },
  {
    id: "evt-05",
    timestamp: baseTime + 1000 * 60 * 5,
    tileId: "C3",
    state: "warn",
    riskScore: 0.53,
    reasonText: "최근 10분 동안 온도 변화량이 가파릅니다.",
    contributions: {
      temperature: 0.61,
      tempSlope: 0.56,
      smoke: 0.24,
      luminanceDelta: 0.13,
    },
  },
  {
    id: "evt-06",
    timestamp: baseTime + 1000 * 60 * 6,
    tileId: "D4",
    state: "fault",
    riskScore: 0.35,
    reasonText: "센서 통신 오류가 감지되었습니다.",
    contributions: {
      temperature: 0.12,
      tempSlope: 0,
      smoke: 0.14,
      luminanceDelta: 0.09,
    },
  },
];

export const mockEvents: EventLogItem[] = [...mockEventsSeed].sort(
  (a, b) => a.timestamp - b.timestamp
);
